<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âç°ÂÜå</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            text-align: center;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            transition: all 0.3s ease;
        }
        
        /* ‰∏ªÈ¢òÈ¢úËâ≤ÂÆö‰πâ */
        body.theme-green {
            --primary-color: #4CAF50;
            --primary-dark: #2E7D32;
            --primary-light: #C8E6C9;
        }
        
        body.theme-pink {
            --primary-color: #E91E63;
            --primary-dark: #C2185B;
            --primary-light: #F8BBD0;
        }
        
        body.theme-blue {
            --primary-color: #2196F3;
            --primary-dark: #0d47a1;
            --primary-light: #BBDEFB;
        }
        
        body.theme-yellow {
            --primary-color: #FFC107;
            --primary-dark: #FFA000;
            --primary-light: #FFECB3;
        }
        
        body.theme-purple {
            --primary-color: #9C27B0;
            --primary-dark: #7B1FA2;
            --primary-light: #E1BEE7;
        }
        
        body.theme-dark {
            --primary-color: #673AB7;
            --primary-dark: #512DA8;
            --primary-light: #D1C4E9;
            background: linear-gradient(135deg, #121212 0%, #333 100%);
            color: #fff;
        }
        
        body.theme-dark .header,
        body.theme-dark .pool-selection,
        body.theme-dark .gacha-section,
        body.theme-dark .modal-content {
            background-color: #1E1E1E;
            color: #fff;
            border-color: #333;
        }
        
        body.theme-dark .album-card {
            background-color: #2d2d2d;
            border-color: #444;
        }
        
        body.theme-dark .album-card.collected {
            background-color: #3d3d3d;
        }
        
        body.theme-dark .album-card .card-name {
            color: #ddd;
        }
        
        body.theme-dark .pity-counter,
        body.theme-dark .ssr-selector {
            background: linear-gradient(135deg, #2d2d2d 0%, #252525 100%);
        }
        
        body.theme-dark .shop-item:hover {
            background-color: #2d2d2d;
        }
        
        body.theme-dark .shop-item-details .shop-item-name {
            color: #fff;
        }
        
        .header {
            margin-bottom: 20px;
            padding: 15px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .coins-display {
            background: linear-gradient(135deg, #FFC107 0%, #FF9800 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 24px;
            margin-bottom: 20px;
            display: inline-flex;
            align-items: center;
            gap: 20px;
            min-width: 300px;
            justify-content: center;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        .exchange-btn {
            background: linear-gradient(135deg, #2196F3 0%, #0d47a1 100%);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 30px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .exchange-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        /* Âç°Ê±†ÈÄâÊã©Âå∫Âüü */
        .pool-selection {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 25px;
            border: 1px solid #eaeaea;
        }
        .pool-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 12px;
        }
        .pool-tab {
            padding: 12px 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
            border-radius: 30px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .pool-tab.active {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        .pool-tab:hover:not(.active) {
            background: linear-gradient(135deg, #e0e0e0 0%, #d0d0d0 100%);
        }
        /* SSRÈÄâÊã©Âå∫Âüü - ÁÆÄÂåñÁâà */
        .ssr-selector {
            margin-top: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%);
            border-radius: 12px;
            text-align: center;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
        }
        .ssr-select {
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 30px;
            border: 2px solid var(--primary-color);
            margin-top: 15px;
            width: 85%;
            max-width: 350px;
            background-color: white;
            font-weight: bold;
            outline: none;
            transition: all 0.3s;
        }
        .ssr-select:focus {
            border-color: #2196F3;
            box-shadow: 0 0 10px rgba(33,150,243,0.3);
        }
        .selected-ssr-preview {
            margin-top: 20px;
            display: none;
        }
        .selected-ssr-card {
            width: 140px;
            height: 240px;
            margin: 0 auto;
            background: linear-gradient(135deg, #FFD700 0%, #FFA000 100%);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            border: 3px solid #FFC107;
            overflow: hidden;
        }
        .selected-ssr-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .selected-ssr-name {
            margin-top: 15px;
            font-weight: bold;
            font-size: 18px;
            color: #333;
        }
        /* ÊäΩÂç°Âå∫Âüü */
        .gacha-section {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 25px;
            border: 1px solid #eaeaea;
        }
        .gacha-buttons {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 25px;
        }
        .gacha-btn {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 15px 35px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .gacha-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 8px 15px rgba(0,0,0,0.3);
        }
        .gacha-btn:disabled {
            background: linear-gradient(135deg, #cccccc 0%, #999999 100%);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .gacha-cost {
            font-weight: bold;
            font-size: 20px;
        }
        /* ‰øùÂ∫ïËÆ°Êï∞Âô® */
        .pity-counter {
            margin-top: 25px;
            padding: 15px;
            background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%);
            border-radius: 10px;
            font-size: 16px;
            box-shadow: inset 0 0 8px rgba(0,0,0,0.05);
        }
        /* ÂºπÁ™óÊ†∑Âºè */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: modalFadeIn 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28);
            border: 1px solid #e0e0e0;
        }
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-40px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            position: sticky;
            top: 0;
            background-color: white;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
            z-index: 10;
        }
        .modal-title {
            font-size: 24px;
            font-weight: bold;
            margin: 0;
            color: #333;
        }
        .close-modal {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #777;
            transition: all 0.3s;
        }
        .close-modal:hover {
            color: #f44336;
            transform: rotate(90deg);
        }
        /* Âç°ÂÜåÊ†∑Âºè */
        .album-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 12px;
        }
        .album-tab {
            padding: 10px 20px;
            cursor: pointer;
            transition: all 0.3s;
            background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
            border-radius: 30px;
            font-weight: bold;
        }
        .album-tab.active {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .album-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 18px;
            padding: 10px;
        }
        .album-card {
            aspect-ratio: 7/12;
            background-color: #f8f8f8;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border: 2px solid #e0e0e0;
        }
        .album-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        .album-card.collected {
            background-color: #fff;
            border-color: #FFC107;
        }
        .album-card.collected::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,215,0,0.2) 0%, rgba(255,255,255,0) 50%);
        }
        .album-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .album-card .card-image-container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }
        .album-card .card-name {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            color: white;
            padding: 8px;
            font-size: 13px;
            text-align: center;
            z-index: 2;
        }
        .album-card .card-rarity {
            position: absolute;
            top: 8px;
            right: 8px;
            background-color: rgba(0,0,0,0.7);
            color: white;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
            z-index: 2;
        }
        .unknown-card {
            font-size: 36px;
            font-weight: bold;
            color: #ccc;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        /* Âç°ÂÜåÊåâÈíÆ */
        .album-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 28px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
            z-index: 100;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .album-btn:hover {
            transform: scale(1.15) rotate(10deg);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        }
        .shop-btn {
            position: fixed;
            bottom: 120px;
            right: 30px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 28px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
            z-index: 100;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .shop-btn:hover {
            transform: scale(1.15) rotate(-10deg);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        }
        /* ‰∏ªÈ¢òÂàáÊç¢ÊåâÈíÆ */
        .theme-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 28px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
            z-index: 100;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .theme-btn:hover {
            transform: scale(1.15) rotate(10deg);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        }
        /* ‰∏ªÈ¢òÈÄâÊã©ÂºπÁ™ó */
        .theme-options {
            position: fixed;
            bottom: 120px;
            left: 30px;
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 99;
            display: none;
            flex-direction: column;
            gap: 10px;
        }
        .theme-option {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .theme-option:hover {
            transform: scale(1.1);
        }
        .theme-option.green {
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
            color: white;
        }
        .theme-option.pink {
            background: linear-gradient(135deg, #E91E63 0%, #C2185B 100%);
            color: white;
        }
        .theme-option.blue {
            background: linear-gradient(135deg, #2196F3 0%, #0d47a1 100%);
            color: white;
        }
        .theme-option.yellow {
            background: linear-gradient(135deg, #FFC107 0%, #FFA000 100%);
            color: white;
        }
        .theme-option.purple {
            background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);
            color: white;
        }
        .theme-option.dark {
            background: linear-gradient(135deg, #673AB7 0%, #512DA8 100%);
            color: white;
        }
        /* ÊäΩÂç°ÁªìÊûúÂºπÁ™ó */
        .result-card {
            width: 175px; /* 7ÁöÑ25ÂÄç */
            height: 300px; /* 12ÁöÑ25ÂÄç */
            margin: 0 auto;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        .result-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        .result-card.ssr {
            border: 4px solid #FFD700;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }
        .result-card.sr {
            border: 4px solid #C0C0C0;
            background: linear-gradient(135deg, #C0C0C0 0%, #A0A0A0 100%);
        }
        .result-card.r {
            border: 4px solid #CD7F32;
            background: linear-gradient(135deg, #CD7F32 0%, #A0522D 100%);
        }
        .result-card img {
            width: 90%;
            height: 75%;
            object-fit: cover;
            border-radius: 10px;
        }
        .result-card .rarity {
            position: absolute;
            top: 10px;
            right: 10px;
            font-weight: bold;
            font-size: 18px;
            color: white;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
            padding: 5px 10px;
            border-radius: 20px;
            background-color: rgba(0,0,0,0.5);
        }
        .result-card .card-name {
            margin-top: 10px;
            font-weight: bold;
            font-size: 18px;
            color: #333;
            padding: 5px 10px;
            background-color: rgba(255,255,255,0.8);
            border-radius: 20px;
        }
        .new-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: linear-gradient(135deg, #FF5722 0%, #E64A19 100%);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
            z-index: 2;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        /* ÂïÜÂ∫óÂºπÁ™ó */
        .shop-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: all 0.3s;
            border-radius: 10px;
        }
        .shop-item:hover {
            background-color: #f9f9f9;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .shop-item:last-child {
            border-bottom: none;
        }
        .shop-item-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .shop-item-img {
            width: 70px;
            height: 100px;
            background-color: #f8f8f8;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            border: 2px solid #e0e0e0;
        }
        .shop-item-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .shop-item-details {
            flex-grow: 1;
            text-align: left;
        }
        .shop-item-name {
            font-weight: bold;
            font-size: 18px;
            color: #333;
        }
        .shop-item-desc {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        .shop-item-price {
            font-weight: bold;
            color: #FF5722;
            font-size: 18px;
            margin-right: 15px;
        }
        .shop-item-btn {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 8px 18px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }
        .shop-item-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 5px 12px rgba(0,0,0,0.3);
        }
        .shop-item-btn:disabled {
            background: linear-gradient(135deg, #cccccc 0%, #999999 100%);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        /* ÁßØÂàÜÂÖëÊç¢Ë°®Âçï */
        .exchange-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 400px;
            margin: 0 auto;
        }
        .exchange-form-group {
            display: flex;
            flex-direction: column;
            text-align: left;
        }
        .exchange-form-group label {
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 16px;
            color: #333;
        }
        .exchange-form-group input {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        .exchange-form-group input:focus {
            border-color: #2196F3;
            box-shadow: 0 0 10px rgba(33,150,243,0.3);
            outline: none;
        }
        .info-text {
            font-size: 14px;
            color: #666;
            margin-top: 8px;
        }
        .exchange-submit {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 14px;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .exchange-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        /* ÂìçÂ∫îÂºèË∞ÉÊï¥ */
        @media (max-width: 768px) {
            .gacha-buttons {
                flex-direction: column;
                gap: 15px;
            }
            .pool-tabs {
                flex-direction: column;
                align-items: center;
            }
            .album-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            .shop-btn {
                bottom: 110px;
            }
            .theme-btn {
                bottom: 30px;
            }
            .theme-options {
                bottom: 110px;
            }
        }
    </style>
</head>
<body class="theme-green">
    <div class="header">
        <h1>üé¥ Âç°ÁâáÊî∂ÈõÜ</h1>
        <p>Êî∂ÈõÜÁ®ÄÊúâÂç°ÁâáÔºåÂÆåÊàê‰Ω†ÁöÑ‰∏ìÂ±ûÊî∂ËóèÔºÅ</p>
    </div>
    
    <div class="coins-display">
        <span>ÂΩìÂâçÈáëÂ∏Å: <span id="current-coins">5000</span></span>
        <button class="exchange-btn" onclick="openExchangeModal()">ÁßØÂàÜÂÖëÊç¢</button>
    </div>
    
    <!-- Âç°Ê±†ÈÄâÊã©Âå∫Âüü -->
    <div class="pool-selection">
        <h2>ÈÄâÊã©Âç°Ê±†</h2>
        <div class="pool-tabs">
            <div class="pool-tab active" onclick="switchPool('zodiac')">ÂõõÂ§ßÁ•ûÂÖΩ</div>
            <div class="pool-tab" onclick="switchPool('constellation')">ÂçÅ‰∫åÊòüÂ∫ß</div>
            <div class="pool-tab" onclick="switchPool('seasons')">ÂõõÂ≠£ÈôêÂÆö</div>
        </div>
        
        <!-- ÁÆÄÂåñÁöÑSSRÈÄâÊã©Âå∫Âüü -->
        <div class="ssr-selector">
            <h3>ÈÄâÊã©ÁõÆÊ†áSSRÂç°Áâá</h3>
            <select class="ssr-select" id="ssr-select" onchange="selectSSR(this.value)">
                <option value="">-- ËØ∑ÈÄâÊã©‰∏ÄÂº†SSRÂç°Áâá --</option>
                <!-- SSRÈÄâÈ°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
            </select>
            
            <div class="selected-ssr-preview" id="selected-ssr-preview">
                <div class="selected-ssr-card" id="selected-ssr-card">
                    <!-- Âç°ÁâáÈ¢ÑËßàÂÜÖÂÆπ -->
                </div>
                <div class="selected-ssr-name" id="selected-ssr-name"></div>
            </div>
        </div>
    </div>
    
    <!-- ÊäΩÂç°Âå∫Âüü -->
    <div class="gacha-section">
        <h2>ÊäΩÂç°</h2>
        <p>ÂΩìÂâçÂç°Ê±†: <span id="current-pool-name">ÂçÅ‰∫åÁîüËÇñ</span></p>
        
        <div class="gacha-buttons">
            <button class="gacha-btn" onclick="drawCard(1)">
                <span>ÂçïÊäΩ</span>
                <span class="gacha-cost">(50ÈáëÂ∏Å)</span>
            </button>
            <button class="gacha-btn" onclick="drawCard(10)">
                <span>ÂçÅËøûÊäΩ</span>
                <span class="gacha-cost">(450ÈáëÂ∏Å)</span>
            </button>
        </div>
        
        <div class="pity-counter">
            <div>SSR‰øùÂ∫ïËÆ°Êï∞: <span id="ssr-pity">0</span>/80 (80ÊäΩÂøÖÂæóSSR)</div>
            <div>SR‰øùÂ∫ïËÆ°Êï∞: <span id="sr-pity">0</span>/10 (10ÊäΩÂøÖÂæóSRÊàñ‰ª•‰∏ä)</div>
        </div>
    </div>
    
    <!-- ÊäΩÂç°ÁªìÊûúÂºπÁ™ó -->
    <div class="modal" id="result-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ÊäΩÂç°ÁªìÊûú</h3>
                <button class="close-modal" onclick="closeResultModal()">&times;</button>
            </div>
            <div id="result-container">
                <!-- ÊäΩÂç°ÁªìÊûúÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
            </div>
            <button class="gacha-btn" onclick="closeResultModal()" style="margin-top: 20px;">Á°ÆÂÆö</button>
        </div>
    </div>
    
    <!-- Âç°ÂÜåÂºπÁ™ó -->
    <div class="modal" id="album-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ÊàëÁöÑÂç°ÂÜå</h3>
                <button class="close-modal" onclick="closeAlbumModal()">&times;</button>
            </div>
            <div class="album-tabs" id="album-tabs">
                <!-- Âç°ÂÜåÊ†áÁ≠æÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
            </div>
            <div class="album-grid" id="album-grid">
                <!-- Âç°ÂÜåÂÜÖÂÆπÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
    </div>
    
    <!-- Á¢éÁâáÂïÜÂ∫óÂºπÁ™ó -->
    <div class="modal" id="shop-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Á¢éÁâáÂïÜÂ∫ó <span id="modal-fragments-count">(0Á¢éÁâá)</span></h3>
                <button class="close-modal" onclick="closeShopModal()">&times;</button>
            </div>
            <div id="shop-items">
                <!-- ÂïÜÂ∫óÁâ©ÂìÅÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
    </div>
    
    <!-- ÁßØÂàÜÂÖëÊç¢ÂºπÁ™ó -->
    <div class="modal" id="exchange-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ÁßØÂàÜÂÖëÊç¢ÈáëÂ∏Å</h3>
                <button class="close-modal" onclick="closeExchangeModal()">&times;</button>
            </div>
            <div class="exchange-form">
                <div class="exchange-form-group">
                    <label for="modal-exchange-points">ÂÖëÊç¢ÁßØÂàÜ</label>
                    <input type="number" id="modal-exchange-points" placeholder="ËæìÂÖ•ÁßØÂàÜÊï∞Èáè" min="1">
                    <p class="info-text">ÂΩìÂâçÂÖëÊç¢Áéá: 1ÁßØÂàÜ = <span id="modal-exchange-rate">10</span>ÈáëÂ∏Å</p>
                </div>
                <div class="exchange-form-group">
                    <label>ÂèØËé∑ÂæóÈáëÂ∏Å</label>
                    <input type="text" id="modal-exchange-result" placeholder="0" readonly>
                </div>
                <button class="exchange-submit" onclick="modalExchangePoints()">Á°ÆËÆ§ÂÖëÊç¢</button>
            </div>
        </div>
    </div>
    
    <!-- Âç°ÂÜåÊåâÈíÆ -->
    <button class="album-btn" onclick="openAlbumModal()">üìî</button>
    <button class="shop-btn" onclick="openShopModal()">üõçÔ∏è</button>
    <!-- ‰∏ªÈ¢òÂàáÊç¢ÊåâÈíÆ -->
    <button class="theme-btn" onclick="toggleThemeOptions()">üé®</button>
    <div class="theme-options" id="theme-options">
        <button class="theme-option green" onclick="changeTheme('green')"></button>
        <button class="theme-option pink" onclick="changeTheme('pink')"></button>
        <button class="theme-option blue" onclick="changeTheme('blue')"></button>
        <button class="theme-option yellow" onclick="changeTheme('yellow')">‚òÄ</button>
        <button class="theme-option purple" onclick="changeTheme('purple')"></button>
        <button class="theme-option dark" onclick="changeTheme('dark')"></button>
    </div>
    
    <script>
        // ÂàùÂßãÂåñÊï∞ÊçÆ
        let coins = localStorage.getItem('userCoins') ? parseInt(localStorage.getItem('userCoins')) : 5000;
        let fragments = localStorage.getItem('userFragments') ? parseInt(localStorage.getItem('userFragments')) : 25;
        let collectedCards = localStorage.getItem('collectedCards') ? JSON.parse(localStorage.getItem('collectedCards')) : {};
        let pityCounters = localStorage.getItem('pityCounters') ? JSON.parse(localStorage.getItem('pityCounters')) : {
            ssr: 0,
            sr: 0
        };
        let selectedSSR = localStorage.getItem('selectedSSR') || null;
        let currentPool = localStorage.getItem('currentPool') || 'zodiac';
        const exchangeRate = 10; // 1ÁßØÂàÜ = 10ÈáëÂ∏Å
        
        // Âç°Ê±†ÈÖçÁΩÆ - Êï¥ÂêàÂõõÂ≠£ÈôêÂÆö‰∏∫‰∏Ä‰∏™Ê±†Â≠ê
        const cardPools = {
            zodiac: {
               name: "Á•ûÂÖΩÁîüËÇñ",
               ssr: [
                  {
                       id: "beast-ssr-1",
                       name: "ÈùíÈæô",
                       rarity: "SSR",
                       image: "images/cards/animal/ssr-animal1.jpg"
                   },
                   {
                      id: "beast-ssr-2",
                      name: "ÁôΩËôé",
                      rarity: "SSR",
                      image: "images/cards/animal/ssr-animal2.jpg"
                    },
                    {
                      id: "beast-ssr-3",
                      name: "Êú±ÈõÄ",
                      rarity: "SSR",
                      image: "images/cards/animal/ssr-animal3.jpg"
                   },
                   {
                      id: "beast-ssr-4",
                      name: "ÁéÑÊ≠¶",
                      rarity: "SSR",
                      image: "images/cards/animal/ssr-animal4.jpg"
                }
             ],
            sr: [
          // ÂçÅ‰∫åÁîüËÇñ
                { id: "zodiac-sr-1", name: "Â≠êÈº†", rarity: "SR", image: "images/cards/animal/sr-rat.jpg" },
                { id: "zodiac-sr-2", name: "‰∏ëÁâõ", rarity: "SR", image: "images/cards/animal/sr-ox.jpg" },
                { id: "zodiac-sr-3", name: "ÂØÖËôé", rarity: "SR", image: "images/cards/animal/sr-tiger.jpg" },
                { id: "zodiac-sr-4", name: "ÂçØÂÖî", rarity: "SR", image: "images/cards/animal/sr-rabbit.jpg" },
                { id: "zodiac-sr-5", name: "Ëæ∞Èæô", rarity: "SR", image: "images/cards/animal/sr-dragon.jpg" },
                { id: "zodiac-sr-6", name: "Â∑≥Ëõá", rarity: "SR", image: "images/cards/animal/sr-snake.jpg" },
                { id: "zodiac-sr-7", name: "ÂçàÈ©¨", rarity: "SR", image: "images/cards/animal/sr-horse.jpg" },
                { id: "zodiac-sr-8", name: "Êú™Áæä", rarity: "SR", image: "images/cards/animal/sr-goat.jpg" },
                { id: "zodiac-sr-9", name: "Áî≥Áå¥", rarity: "SR", image: "images/cards/animal/sr-monkey.jpg" },
                { id: "zodiac-sr-10", name: "ÈÖâÈ∏°", rarity: "SR", image: "images/cards/animal/sr-rooster.jpg" },
                { id: "zodiac-sr-11", name: "ÊàåÁãó", rarity: "SR", image: "images/cards/animal/sr-dog.jpg" },
                { id: "zodiac-sr-12", name: "‰∫•Áå™", rarity: "SR", image: "images/cards/animal/sr-pig.jpg" }
                ],
            r: Array.from({length: 48}, (_, i) => {
          // Â∏∏ËßÅÂä®Áâ©ÂêçÁß∞Êï∞ÁªÑÔºàÁ§∫‰æãÔºâ
             const animals = [
                "ÁÜäÁå´", "ÁãÆÂ≠ê", "Â§ßË±°", "ÈïøÈ¢àÈπø", "ÊñëÈ©¨", "ÁäÄÁâõ", 
                "ÁåéË±π", "Áãº", "ÁãêÁã∏", "ÁÜä", "Èπø", "Ê≤≥È©¨",
                "Ë¢ãÈº†", "ËÄÉÊãâ", "‰ºÅÈπÖ", "Êµ∑Ë±ö", "È≤®È±º", "ËÄÅÈπ∞",
                "Áå´Â§¥Èπ∞", "Â≠îÈõÄ", "Èπ¶Èπâ", "ÈùíËõô", "‰πåÈæü", "Ëú•Ëú¥",
                "È≥ÑÈ±º", "Áå©Áå©", "ÊùæÈº†", "Âà∫Áå¨", "È∏≠Â≠ê", "È™ÜÈ©º",
                "ÁæöÁæä", "Ê∞¥Áâõ", "ÁäÄÈ∏ü", "Â§©ÈπÖ", "Èπ§", "‰ø°Â§©ÁøÅ",
                "Á´†È±º", "Ê∞¥ÊØç", "Êµ∑Êòü", "ËûÉËüπ", "ÈæôËôæ", "Ëù¥Ëù∂",
                "ËúúËúÇ", "ËúªËúì", "ËúòËõõ", "ËùéÂ≠ê", "ÂèòËâ≤Èæô", "Á©øÂ±±Áî≤"
                 ];
        
                    return {
                    id: `animal-r-${i+1}`,
                    name: animals[i] || `Âä®Áâ©${i+1}`,
                    rarity: "R",
                    image: `images/cards/animal/r-animal-${i + 1}.jpg`
                 };
              })
            },
            constellation: {
                name: "ÂçÅ‰∫åÊòüÂ∫ß",
                ssr: [
                    { id: "constellation-ssr-1", name: "ÁôΩÁæäÂ∫ß", rarity: "SSR", image: "images/cards/star/ssr-aries.jpg" },
                    { id: "constellation-ssr-2", name: "ÈáëÁâõÂ∫ß", rarity: "SSR", image: "images/cards/star/ssr-taurus.jpg" },
                    { id: "constellation-ssr-3", name: "ÂèåÂ≠êÂ∫ß", rarity: "SSR", image: "images/cards/star/ssr-gemini.jpg" },
                    { id: "constellation-ssr-4", name: "Â∑®ËüπÂ∫ß", rarity: "SSR", image: "images/cards/star/ssr-cancer.jpg" },
                    { id: "constellation-ssr-5", name: "ÁãÆÂ≠êÂ∫ß", rarity: "SSR", image: "images/cards/star/ssr-leo.jpg" },
                    { id: "constellation-ssr-6", name: "Â§ÑÂ•≥Â∫ß", rarity: "SSR", image: "images/cards/star/ssr-virgo.jpg" },
                    { id: "constellation-ssr-7", name: "Â§©Áß§Â∫ß", rarity: "SSR", image: "images/cards/star/ssr-libra.jpg" },
                    { id: "constellation-ssr-8", name: "Â§©ËùéÂ∫ß", rarity: "SSR", image: "images/cards/star/ssr-scorpio.jpg" },
                    { id: "constellation-ssr-9", name: "Â∞ÑÊâãÂ∫ß", rarity: "SSR", image: "images/cards/star/ssr-sagittarius.jpg" },
                    { id: "constellation-ssr-10", name: "Êë©ÁæØÂ∫ß", rarity: "SSR", image: "images/cards/star/ssr-capricorn.jpg" },
                    { id: "constellation-ssr-11", name: "Ê∞¥Áì∂Â∫ß", rarity: "SSR", image: "images/cards/star/ssr-aquarius.jpg" },
                    { id: "constellation-ssr-12", name: "ÂèåÈ±ºÂ∫ß", rarity: "SSR", image: "images/cards/star/ssr-pisces.jpg" }
                ],
                sr: [
                    { id: "constellation-sr-1", name: "Â§™Èò≥", rarity: "SR", image: "images/cards/star/sr-sun.jpg" },
                    { id: "constellation-sr-2", name: "Ê∞¥Êòü", rarity: "SR", image: "images/cards/star/sr-mercury.jpg" },
                    { id: "constellation-sr-3", name: "ÈáëÊòü", rarity: "SR", image: "images/cards/star/sr-venus.jpg" },
                    { id: "constellation-sr-4", name: "Âú∞ÁêÉ", rarity: "SR", image: "images/cards/star/sr-earth.jpg" },
                    { id: "constellation-sr-5", name: "ÊúàÁêÉ", rarity: "SR", image: "images/cards/star/sr-moon.jpg" },
                    { id: "constellation-sr-6", name: "ÁÅ´Êòü", rarity: "SR", image: "images/cards/star/sr-mars.jpg" },
                    { id: "constellation-sr-7", name: "Êú®Êòü", rarity: "SR", image: "images/cards/star/sr-jupiter.jpg" },
                    { id: "constellation-sr-8", name: "ÂúüÊòü", rarity: "SR", image: "images/cards/star/sr-saturn.jpg" },
                    { id: "constellation-sr-9", name: "Â§©ÁéãÊòü", rarity: "SR", image: "images/cards/star/sr-uranus.jpg" },
                    { id: "constellation-sr-10", name: "Êµ∑ÁéãÊòü", rarity: "SR", image: "images/cards/star/sr-neptune.jpg" }
                ],
                r: Array.from({length: 76}, (_, i) => {
        // Áé∞‰ª£ÊòüÂ∫ßÂêçÁß∞Êï∞ÁªÑÔºàÁ§∫‰æãÔºâ
        const modernConstellations = [
            "‰ªôÂ•≥Â∫ß", "ÂîßÁ≠íÂ∫ß", "Â§©ÁáïÂ∫ß", "ÂÆùÁì∂Â∫ß", "Â§©Èπ∞Â∫ß", "Â§©ÂùõÂ∫ß",
            "ÁôΩÁæäÂ∫ß", "Âæ°Â§´Â∫ß", "ÁâßÂ§´Â∫ß", "ÈõïÂÖ∑Â∫ß", "ÈπøË±πÂ∫ß", "Â∑®ËüπÂ∫ß",
            "ÁåéÁä¨Â∫ß", "Â§ßÁä¨Â∫ß", "Â∞èÁä¨Â∫ß", "Êë©ÁæØÂ∫ß", "ËàπÂ∫ïÂ∫ß", "‰ªôÂêéÂ∫ß",
            "Âçä‰∫∫È©¨Â∫ß", "‰ªôÁéãÂ∫ß", "È≤∏È±ºÂ∫ß", "Â†∞ËúìÂ∫ß", "ÂúÜËßÑÂ∫ß", "Â§©È∏ΩÂ∫ß",
            "ÂêéÂèëÂ∫ß", "ÂçóÂÜïÂ∫ß", "ÂåóÂÜïÂ∫ß", "‰πåÈ∏¶Â∫ß", "Â∑®ÁàµÂ∫ß", "ÂçóÂçÅÂ≠óÂ∫ß",
            "Â§©ÈπÖÂ∫ß", "Êµ∑Ë±öÂ∫ß", "ÂâëÈ±ºÂ∫ß", "Â§©ÈæôÂ∫ß", "Â∞èÈ©¨Â∫ß", "Ê≥¢Ê±üÂ∫ß",
            "Â§©ÁÇâÂ∫ß", "ÂèåÂ≠êÂ∫ß", "Â§©Èπ§Â∫ß", "Ê≠¶‰ªôÂ∫ß", "Êó∂ÈíüÂ∫ß", "ÈïøËõáÂ∫ß",
            "Ê∞¥ËõáÂ∫ß", "Âç∞Á¨¨ÂÆâÂ∫ß", "ËùéËôéÂ∫ß", "ÁãÆÂ≠êÂ∫ß", "Â∞èÁãÆÂ∫ß", "Â§©ÂÖîÂ∫ß",
            "Â§©Áß§Â∫ß", "Ë±∫ÁãºÂ∫ß", "Â§©Áå´Â∫ß", "Â§©Áê¥Â∫ß", "Â±±Ê°àÂ∫ß", "ÊòæÂæÆÈïúÂ∫ß",
            "È∫íÈ∫üÂ∫ß", "ËãçËùáÂ∫ß", "Áü©Â∞∫Â∫ß", "ÂçóÊûÅÂ∫ß", "ËõáÂ§´Â∫ß", "ÁåéÊà∑Â∫ß",
            "Â≠îÈõÄÂ∫ß", "È£ûÈ©¨Â∫ß", "Ëã±‰ªôÂ∫ß", "Âá§Âá∞Â∫ß", "ÁªòÊû∂Â∫ß", "ÂèåÈ±ºÂ∫ß",
            "ÂçóÈ±ºÂ∫ß", "ËàπÂ∞æÂ∫ß", "ÁΩóÁõòÂ∫ß", "ÁΩëÁΩüÂ∫ß", "Â§©ÁÆ≠Â∫ß", "‰∫∫È©¨Â∫ß",
            "Â§©ËùéÂ∫ß", "ÁéâÂ§´Â∫ß", "ÁõæÁâåÂ∫ß", "Â∑®ËõáÂ∫ß", "ÂÖ≠ÂàÜ‰ª™Â∫ß", "ÈáëÁâõÂ∫ß",
            "ÊúõËøúÈïúÂ∫ß", "‰∏âËßíÂ∫ß", "Âçó‰∏âËßíÂ∫ß", "ÊùúÈπÉÂ∫ß", "Â§ßÁÜäÂ∫ß", "Â∞èÁÜäÂ∫ß",
            "ËàπÂ∏ÜÂ∫ß", "ÂÆ§Â•≥Â∫ß", "È£ûÈ±ºÂ∫ß", "ÁãêÁã∏Â∫ß"
        ];
        
                    return {
                        id: `constellation-r-${i+1}`,
                        name: modernConstellations[i] || `ÊòüÂ∫ß${i+1}`,
                        rarity: "R",
                        image: `images/cards/star/r-constellation-${i+1}.jpg`
                    };
                })
            },
            

            seasons: {
                name: "ÂõõÂ≠£ÈôêÂÆö",
                ssr: [
                        {
                        id: `season-ssr-spring`, 
                        name: `Êò•`, 
                        rarity: 'SSR',
                        image: "images/cards/seasons/ssr-spring.jpg"
                        },
                    {
                        id: `season-ssr-summer`, 
                        name: `Â§è`, 
                        rarity: 'SSR',
                        image: "images/cards/seasons/ssr-summer.jpg"
                    },
                    {
                        id: `season-ssr-autumn`, 
                        name: `Áßã`, 
                        rarity: 'SSR',
                        image: "images/cards/seasons/ssr-autumn.jpg"
                    },
                    {
                        id: `season-ssr-winter`, 
                        name: `ÂÜ¨`, 
                        rarity: 'SSR',
                        image:  "images/cards/seasons/ssr-winter.jpg"
                    }
                ],
 
            sr: [
            // Êò•Â≠£ËäÇÊ∞îÔºà6Âº†Ôºâ
            { id: "sr-spring-1", name: "Á´ãÊò•", rarity: "SR", image: "images/cards/seasons/sr-spring-1.jpg" },
            { id: "sr-spring-2", name: "Èõ®Ê∞¥", rarity: "SR", image: "images/cards/seasons/sr-spring-2.jpg" },
            { id: "sr-spring-3", name: "ÊÉäËõ∞", rarity: "SR", image: "images/cards/seasons/sr-spring-3.jpg" },
            { id: "sr-spring-4", name: "Êò•ÂàÜ", rarity: "SR", image: "images/cards/seasons/sr-spring-4.jpg" },
            { id: "sr-spring-5", name: "Ê∏ÖÊòé", rarity: "SR", image: "images/cards/seasons/sr-spring-5.jpg" },
            { id: "sr-spring-6", name: "Ë∞∑Èõ®", rarity: "SR", image: "images/cards/seasons/sr-spring-6.jpg" },
            
            // Â§èÂ≠£ËäÇÊ∞îÔºà6Âº†Ôºâ
            { id: "sr-summer-1", name: "Á´ãÂ§è", rarity: "SR", image: "images/cards/seasons/sr-summer-1.jpg" },
            { id: "sr-summer-2", name: "Â∞èÊª°", rarity: "SR", image: "images/cards/seasons/sr-summer-2.jpg" },
            { id: "sr-summer-3", name: "ËäíÁßç", rarity: "SR", image: "images/cards/seasons/sr-summer-3.jpg" },
            { id: "sr-summer-4", name: "Â§èËá≥", rarity: "SR", image: "images/cards/seasons/sr-summer-4.jpg" },
            { id: "sr-summer-5", name: "Â∞èÊöë", rarity: "SR", image: "images/cards/seasons/sr-summer-5.jpg" },
            { id: "sr-summer-6", name: "Â§ßÊöë", rarity: "SR", image: "images/cards/seasons/sr-summer-6.jpg" },
            
            // ÁßãÂ≠£ËäÇÊ∞îÔºà6Âº†Ôºâ
            { id: "sr-autumn-1", name: "Á´ãÁßã", rarity: "SR", image: "images/cards/seasons/sr-autumn-1.jpg" },
            { id: "sr-autumn-2", name: "Â§ÑÊöë", rarity: "SR", image: "images/cards/seasons/sr-autumn-2.jpg" },
            { id: "sr-autumn-3", name: "ÁôΩÈú≤", rarity: "SR", image: "images/cards/seasons/sr-autumn-3.jpg" },
            { id: "sr-autumn-4", name: "ÁßãÂàÜ", rarity: "SR", image: "images/cards/seasons/sr-autumn-4.jpg" },
            { id: "sr-autumn-5", name: "ÂØíÈú≤", rarity: "SR", image: "images/cards/seasons/sr-autumn-5.jpg" },
            { id: "sr-autumn-6", name: "ÈúúÈôç", rarity: "SR", image: "images/cards/seasons/sr-autumn-6.jpg" },
            
            // ÂÜ¨Â≠£ËäÇÊ∞îÔºà6Âº†Ôºâ
            { id: "sr-winter-1", name: "Á´ãÂÜ¨", rarity: "SR", image: "images/cards/seasons/sr-winter-1.jpg" },
            { id: "sr-winter-2", name: "Â∞èÈõ™", rarity: "SR", image: "images/cards/seasons/sr-winter-2.jpg" },
            { id: "sr-winter-3", name: "Â§ßÈõ™", rarity: "SR", image: "images/cards/seasons/sr-winter-3.jpg" },
            { id: "sr-winter-4", name: "ÂÜ¨Ëá≥", rarity: "SR", image: "images/cards/seasons/sr-winter-4.jpg" },
            { id: "sr-winter-5", name: "Â∞èÂØí", rarity: "SR", image: "images/cards/seasons/sr-winter-5.jpg" },
            { id: "sr-winter-6", name: "Â§ßÂØí", rarity: "SR", image: "images/cards/seasons/sr-winter-6.jpg" }
             ],
            r: Array.from({length: 72}, (_, i) => ({
            id: `season-r-${i+1}`,
            name: `ÂõõÂ≠£${i+1}`,
            rarity: "R",
            image: `images/cards/seasons/r-seasons-${i+1}.jpg`
            }))
            }
        };
        
        // ÁâπÊÆäSPÂç°Áâá(Â°îÁΩóÁâå)
        const spCards = Array.from({length: 22}, (_, i) => ({
            id: `sp-${i+1}`,
            name: `Â°îÁΩóÁâå${i+1}`,
            rarity: 'SP',
            image: `images/cards/sp/sp-${i+1}.jpg`,
            cost: 100, // ÊØè‰∏™SPÂç°ÈúÄË¶Å100Á¢éÁâá
            description: `Â§ßÈòøÂç°ÈÇ£Á¨¨${i+1}Âè∑`  
        }));
        
        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            // Â∫îÁî®‰øùÂ≠òÁöÑ‰∏ªÈ¢ò
            const savedTheme = localStorage.getItem('selectedTheme') || 'green';
            document.body.className = `theme-${savedTheme}`;
            
            updateCoinsDisplay();
            updateFragmentsDisplay();
            renderSSRSelection();
            updatePityCounters();
            document.getElementById('current-pool-name').textContent = cardPools[currentPool].name;
            document.getElementById('modal-exchange-rate').textContent = exchangeRate;
            
            // ÁõëÂê¨ÁßØÂàÜËæìÂÖ•ÂèòÂåñ
            document.getElementById('modal-exchange-points').addEventListener('input', function() {
                updateExchangeResult();
            });
            
            // Â¶ÇÊûúÊúâÈÄâ‰∏≠ÁöÑSSRÔºåÊòæÁ§∫È¢ÑËßà
            if (selectedSSR) {
                const card = getAllSSRCards().find(c => c.id === selectedSSR);
                if (card) {
                    showSSRPreview(card);
                }
            }
        });
        
        // ÂàáÊç¢‰∏ªÈ¢ò
        function changeTheme(theme) {
            document.body.className = `theme-${theme}`;
            localStorage.setItem('selectedTheme', theme);
            closeThemeOptions();
        }
        
        // ÊòæÁ§∫/ÈöêËóè‰∏ªÈ¢òÈÄâÈ°π
        function toggleThemeOptions() {
            const options = document.getElementById('theme-options');
            if (options.style.display === 'flex') {
                options.style.display = 'none';
            } else {
                options.style.display = 'flex';
            }
        }
        
        // ÂÖ≥Èó≠‰∏ªÈ¢òÈÄâÈ°π
        function closeThemeOptions() {
            document.getElementById('theme-options').style.display = 'none';
        }
        
        // Ëé∑ÂèñÂΩìÂâçÂç°Ê±†ÁöÑÊâÄÊúâSSRÂç°Áâá
        function getAllSSRCards() {
            return cardPools[currentPool].ssr;
        }
        
        // Êõ¥Êñ∞ÈáëÂ∏ÅÊòæÁ§∫
        function updateCoinsDisplay() {
            document.getElementById('current-coins').textContent = coins;
            localStorage.setItem('userCoins', coins);
        }
        
        // Êõ¥Êñ∞Á¢éÁâáÊòæÁ§∫
        function updateFragmentsDisplay() {
            try {
                fragments = parseInt(localStorage.getItem('userFragments')) || 0;
                const counter = document.getElementById('modal-fragments-count');
                if (counter) {
                    counter.textContent = `(${fragments}Á¢éÁâá)`;
                }
            } catch (e) {
                console.error("Êõ¥Êñ∞Á¢éÁâáÊòæÁ§∫Â§±Ë¥•:", e);
            }
        }
        
        // Êõ¥Êñ∞‰øùÂ∫ïËÆ°Êï∞Âô®ÊòæÁ§∫
        function updatePityCounters() {
            document.getElementById('ssr-pity').textContent = pityCounters.ssr;
            document.getElementById('sr-pity').textContent = pityCounters.sr;
            localStorage.setItem('pityCounters', JSON.stringify(pityCounters));
        }
        
        // ÂàáÊç¢Âç°Ê±†
        function switchPool(poolId) {
            // Êõ¥Êñ∞Âç°Ê±†Ê†áÁ≠æÁä∂ÊÄÅ
            document.querySelectorAll('.pool-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            currentPool = poolId;
            localStorage.setItem('currentPool', currentPool);
            document.getElementById('current-pool-name').textContent = cardPools[currentPool].name;
            
            // ÈáçÁΩÆÈÄâ‰∏≠ÁöÑSSR
            selectedSSR = null;
            localStorage.removeItem('selectedSSR');
            renderSSRSelection();
            document.getElementById('selected-ssr-preview').style.display = 'none';
        }
        
        // Ê∏≤ÊüìSSRÈÄâÊã©‰∏ãÊãâËèúÂçï
        function renderSSRSelection() {
            const select = document.getElementById('ssr-select');
            select.innerHTML = '';
            
            // Ê∑ªÂä†ÈªòËÆ§ÈÄâÈ°π
            const defaultOption = document.createElement('option');
            defaultOption.value = '';
            defaultOption.textContent = '-- ËØ∑ÈÄâÊã©‰∏ÄÂº†SSRÂç°Áâá --';
            select.appendChild(defaultOption);
            
            // Ê∑ªÂä†SSRÂç°ÁâáÈÄâÈ°π
            const pool = cardPools[currentPool];
            pool.ssr.forEach(card => {
                const option = document.createElement('option');
                option.value = card.id;
                option.textContent = card.name;
                select.appendChild(option);
            });
            
            // ËÆæÁΩÆÂ∑≤ÈÄâ‰∏≠ÁöÑSSR
            if (selectedSSR) {
                select.value = selectedSSR;
            }
        }
        
        // ÈÄâÊã©SSRÂç°Áâá
        function selectSSR(cardId) {
            if (!cardId) {
                selectedSSR = null;
                localStorage.removeItem('selectedSSR');
                document.getElementById('selected-ssr-preview').style.display = 'none';
                return;
            }
            
            selectedSSR = cardId;
            localStorage.setItem('selectedSSR', selectedSSR);
            
            // ÊòæÁ§∫ÈÄâ‰∏≠ÁöÑSSRÈ¢ÑËßà
            const card = getAllSSRCards().find(c => c.id === cardId);
            if (card) {
                showSSRPreview(card);
            }
        }
        
        // ÊòæÁ§∫SSRÂç°ÁâáÈ¢ÑËßà
        function showSSRPreview(card) {
            const preview = document.getElementById('selected-ssr-preview');
            const cardElement = document.getElementById('selected-ssr-card');
            const nameElement = document.getElementById('selected-ssr-name');
            
            cardElement.innerHTML = `<img src="${card.image}" alt="${card.name}">`;
            nameElement.textContent = card.name;
            
            preview.style.display = 'block';
        }
        function drawCard(count) {
            if (!selectedSSR) {
            alert('ËØ∑ÂÖàÈÄâÊã©‰∏ÄÂº†SSRÂç°Áâá‰Ωú‰∏∫ÁõÆÊ†á!');
            return;
         }

          const cost = count === 1 ? 50 : 450;
          if (coins < cost) {
          alert('ÈáëÂ∏Å‰∏çË∂≥!');
          return;
         }

        coins -= cost;
        updateCoinsDisplay();

        const results = [];
        let gotSSR = false;
        let gotSR = false;

    // SRÊ¶ÇÁéáÈÄíÂ¢ûË°®Ôºà‰ªéÁ¨¨0Ê¨°ÂºÄÂßãËÆ°Êï∞Ôºâ
        const srProbabilityTable = [
        5.4,   // Á¨¨1Ê¨°(Á¥¢Âºï0)
        9.9,   // Á¨¨2Ê¨°
        14.5,  // Á¨¨3Ê¨°
        18.8,  // Á¨¨4Ê¨°
        23.1,  // Á¨¨5Ê¨°
        26.9,  // Á¨¨6Ê¨°
        30.6,  // Á¨¨7Ê¨°
        34.2,  // Á¨¨8Ê¨°
        70.1,  // Á¨¨9Ê¨°
        99.6,  // Á¨¨10Ê¨°
        100    // Á¨¨11Ê¨°
        ];

    for (let i = 0; i < count; i++) {
        // 1. ÂÖàÊ£ÄÊü•SSR‰øùÂ∫ï(80ÊäΩ)
        if (pityCounters.ssr >= 79) {
            results.push(drawSSR());
            gotSSR = true;
            pityCounters.ssr = 0;
            pityCounters.sr = 0; // SSR‰πü‰ºöÈáçÁΩÆSRËÆ°Êï∞Âô®
            continue;
        }

        // 2. Ëé∑ÂèñÂΩìÂâçSRÊ¶ÇÁéá
        const currentSRChance = srProbabilityTable[Math.min(pityCounters.sr, 10)];
        
        // 3. ÁîüÊàêÈöèÊú∫Êï∞ÂÜ≥ÂÆöÊäΩÂç°ÁªìÊûú
        const rand = Math.random() * 100;
        
        if (rand < 0.6) {
            // SSR 0.6%
            results.push(drawSSR());
            gotSSR = true;
            pityCounters.ssr = 0;
            pityCounters.sr = 0; // ÊäΩÂà∞SSR‰πüÈáçÁΩÆSRËÆ°Êï∞Âô®
        } 
        else if (rand < currentSRChance) {
            // SR Âä®ÊÄÅÊ¶ÇÁéá
            results.push(drawSR());
            gotSR = true;
            pityCounters.sr = 0; // ÈáçÁΩÆSRËÆ°Êï∞Âô®
        } 
        else {
            // RÂç°
            results.push(drawR());
            pityCounters.sr++; // Â¢ûÂä†SRËÆ°Êï∞Âô®
        }

        pityCounters.ssr++; // Â¢ûÂä†SSRËÆ°Êï∞Âô®
    }

    updatePityCounters();
    addCardsToCollection(results);
    showResults(results);
}
        
        
        // ÊäΩÂèñSSRÂç°Áâá
       function drawSSR() {
          const pool = cardPools[currentPool];
    
          // Áõ¥Êé•ËøîÂõûÈÄâ‰∏≠ÁöÑSSRÂç°Áâá
          const card = pool.ssr.find(c => c.id === selectedSSR);
    
           return {
          ...card,
           isNew: !collectedCards[card.id]
           };
        }
        
        // ÊäΩÂèñSRÂç°Áâá
        function drawSR() {
            const pool = cardPools[currentPool];
            const card = pool.sr[Math.floor(Math.random() * pool.sr.length)];
            return {
                ...card,
                isNew: !collectedCards[card.id]
            };
        }
        
        // ÊäΩÂèñRÂç°Áâá
        function drawR() {
            const pool = cardPools[currentPool];
            const card = pool.r[Math.floor(Math.random() * pool.r.length)];
            return {
                ...card,
                isNew: !collectedCards[card.id]
            };
        }
        
        // Ê∑ªÂä†Âç°ÁâáÂà∞Êî∂Ëóè
        function addCardsToCollection(cards) {
            let newFragments = 0;
            
            cards.forEach(card => {
                if (!collectedCards[card.id]) {
                    collectedCards[card.id] = {
                        id: card.id,
                        name: card.name,
                        rarity: card.rarity,
                        image: card.image,
                        pool: currentPool,
                        collectedAt: new Date().toISOString()
                    };
                } else {
                    // ÈáçÂ§çÂç°ÁâáËΩ¨Âåñ‰∏∫Á¢éÁâá
                    if (card.rarity === 'SSR') {
                        newFragments += 10;
                    } else if (card.rarity === 'SR') {
                        newFragments += 2;
                    } else {
                        // RÂç°ËΩ¨Âåñ‰∏∫ÁÇπÊï∞Ôºå30ÁÇπ=1Á¢éÁâá
                        newFragments += 1/30;
                    }
                }
            });
            
            // Êõ¥Êñ∞Á¢éÁâá(ÂõõËàç‰∫îÂÖ•)
            fragments += Math.round(newFragments);
            
            // ‰øùÂ≠òÊï∞ÊçÆ
            localStorage.setItem('collectedCards', JSON.stringify(collectedCards));
            localStorage.setItem('userFragments', fragments);
            
            // Êõ¥Êñ∞ÊòæÁ§∫
            updateFragmentsDisplay();
        }
        
        // ÊòæÁ§∫ÊäΩÂç°ÁªìÊûú
        function showResults(results) {
            const container = document.getElementById('result-container');
            container.innerHTML = '';
            
            if (results.length === 1) {
                // ÂçïÊäΩÁªìÊûú
                const card = results[0];
                const cardElement = createResultCardElement(card);
                container.appendChild(cardElement);
                
                // ÊòæÁ§∫Êñ∞Ëé∑ÂæóÊèêÁ§∫
                if (card.isNew) {
                    const newLabel = document.createElement('div');
                    newLabel.textContent = 'Êñ∞Ëé∑Âæó!';
                    newLabel.style.color = '#FF5722';
                    newLabel.style.fontWeight = 'bold';
                    newLabel.style.marginTop = '15px';
                    newLabel.style.fontSize = '18px';
                    container.appendChild(newLabel);
                }
            } else {
                // ÂçÅËøûÁªìÊûú
                const grid = document.createElement('div');
                grid.style.display = 'grid';
                grid.style.gridTemplateColumns = 'repeat(auto-fill, minmax(150px, 1fr))';
                grid.style.gap = '15px';
                grid.style.margin = '0 auto';
                
                results.forEach(card => {
                    const cardElement = createResultCardElement(card, true);
                    grid.appendChild(cardElement);
                });
                
                container.appendChild(grid);
                
                // ÁªüËÆ°ÁªìÊûú
                const ssrCount = results.filter(c => c.rarity === 'SSR').length;
                const srCount = results.filter(c => c.rarity === 'SR').length;
                const newCount = results.filter(c => c.isNew).length;
                
                const stats = document.createElement('div');
                stats.style.marginTop = '25px';
                stats.style.padding = '15px';
                stats.style.background = 'linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%)';
                stats.style.borderRadius = '12px';
                stats.style.textAlign = 'center';
                stats.style.fontSize = '18px';
                stats.innerHTML = `
                    <p><strong>ÊäΩÂç°ÁªìÊûúÁªüËÆ°</strong></p>
                    <p>SSR: ${ssrCount}Âº† | SR: ${srCount}Âº† | Êñ∞Âç°Áâá: ${newCount}Âº†</p>
                `;
                container.appendChild(stats);
            }
            
            openResultModal();
        }
        
        // ÂàõÂª∫ÁªìÊûúÂç°ÁâáÂÖÉÁ¥†
        function createResultCardElement(card, isMulti = false) {
            const cardElement = document.createElement('div');
            cardElement.className = `result-card ${card.rarity.toLowerCase()}`;
            
            if (isMulti) {
                cardElement.style.width = '100%';
                cardElement.style.height = 'auto';
                cardElement.style.margin = '0';
            }
            
            cardElement.innerHTML = `
                <img src="${card.image}" alt="${card.name}">
                <div class="rarity">${card.rarity}</div>
                <div class="card-name">${card.name}</div>
                ${card.isNew ? '<div class="new-badge">NEW</div>' : ''}
            `;
            
            return cardElement;
        }
        
        // ÊâìÂºÄÂç°ÂÜåÂºπÁ™ó
        function openAlbumModal() {
            renderAlbumTabs();
            renderAlbumGrid('all');
            document.getElementById('album-modal').style.display = 'flex';
        }
        
        // ÂÖ≥Èó≠Âç°ÂÜåÂºπÁ™ó
        function closeAlbumModal() {
            document.getElementById('album-modal').style.display = 'none';
        }
        
        // Ê∏≤ÊüìÂç°ÂÜåÊ†áÁ≠æ
        function renderAlbumTabs() {
            const tabs = document.getElementById('album-tabs');
            tabs.innerHTML = '';
            
            // ÂÖ®ÈÉ®Ê†áÁ≠æ
            const allTab = document.createElement('div');
            allTab.className = 'album-tab active';
            allTab.textContent = 'ÂÖ®ÈÉ®';
            allTab.onclick = () => renderAlbumGrid('all');
            tabs.appendChild(allTab);
            
            // ÊåâÂç°Ê±†ÂàÜÁ±ª
            Object.keys(cardPools).forEach(poolId => {
                const tab = document.createElement('div');
                tab.className = 'album-tab';
                tab.textContent = cardPools[poolId].name;
                tab.onclick = () => renderAlbumGrid(poolId);
                tabs.appendChild(tab);
            });
            
            // SPÂç°ÁâáÊ†áÁ≠æ
            const spTab = document.createElement('div');
            spTab.className = 'album-tab';
            spTab.textContent = 'SPÂç°Áâá';
            spTab.onclick = () => renderAlbumGrid('sp');
            tabs.appendChild(spTab);
        }
        
        // Ê∏≤ÊüìÂç°ÂÜåÂÜÖÂÆπ
        function renderAlbumGrid(filter) {
            const grid = document.getElementById('album-grid');
            grid.innerHTML = '';
            
            // Êõ¥Êñ∞Ê†áÁ≠æÁä∂ÊÄÅ
            document.querySelectorAll('#album-tabs .album-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            let activeTab;
            if (event) {
                event.target.classList.add('active');
                activeTab = event.target;
            } else {
                activeTab = document.querySelector('#album-tabs .album-tab.active');
                if (activeTab) activeTab.classList.add('active');
            }
            
            if (filter === 'all') {
                // ÊòæÁ§∫ÊâÄÊúâÂç°Áâá
                Object.keys(cardPools).forEach(poolId => {
                    const pool = cardPools[poolId];
                    [...pool.ssr, ...pool.sr, ...pool.r].forEach(card => {
                        grid.appendChild(createAlbumCardElement(card));
                    });
                });
                
                // Ê∑ªÂä†SPÂç°Áâá
                spCards.forEach(card => {
                    grid.appendChild(createAlbumCardElement(card));
                });
            } else if (filter === 'sp') {
                // ÊòæÁ§∫SPÂç°Áâá
                spCards.forEach(card => {
                    grid.appendChild(createAlbumCardElement(card));
                });
            } else {
                // ÊòæÁ§∫ÁâπÂÆöÂç°Ê±†ÁöÑÂç°Áâá
                const pool = cardPools[filter];
                [...pool.ssr, ...pool.sr, ...pool.r].forEach(card => {
                    grid.appendChild(createAlbumCardElement(card));
                });
            }
        }
        
        // ÂàõÂª∫Âç°ÂÜåÂç°ÁâáÂÖÉÁ¥†
        function createAlbumCardElement(card) {
            const cardElement = document.createElement('div');
            cardElement.className = 'album-card';
            if (collectedCards[card.id]) {
                cardElement.classList.add('collected');
            }
            
            cardElement.innerHTML = `
                <div class="card-image-container">
                    ${collectedCards[card.id] ? 
                        `<img src="${card.image}" alt="${card.name}">` : 
                        '<div class="unknown-card">?</div>'
                    }
                </div>
                <div class="card-name">${collectedCards[card.id] ? card.name : 'Êú™Ëé∑Âæó'}</div>
                <div class="card-rarity">${card.rarity}</div>
            `;
            
            return cardElement;
        }
        
        // Ëé∑ÂèñÁ®ÄÊúâÂ∫¶È¢úËâ≤
        function getRarityColor(rarity) {
            switch (rarity) {
                case 'SSR': return '#FFD700';
                case 'SR': return '#C0C0C0';
                case 'R': return '#CD7F32';
                case 'SP': return '#EE82EE';
                default: return '#f8f8f8';
            }
        }
        
        // ÊâìÂºÄÁ¢éÁâáÂïÜÂ∫óÂºπÁ™ó
        function openShopModal() {
            updateFragmentsDisplay(); 
            renderShopItems();
            document.getElementById('shop-modal').style.display = 'flex';
        }
        
        // ÂÖ≥Èó≠Á¢éÁâáÂïÜÂ∫óÂºπÁ™ó
        function closeShopModal() {
            document.getElementById('shop-modal').style.display = 'none';
        }
        
        // Ê∏≤ÊüìÂïÜÂ∫óÁâ©ÂìÅ
        function renderShopItems() {
            const container = document.getElementById('shop-items');
            container.innerHTML = '';
            
            spCards.forEach(card => {
                const item = document.createElement('div');
                item.className = 'shop-item';
                
                const owned = collectedCards[card.id] ? '<span style="color:#f44336;">(Â∑≤Êã•Êúâ)</span>' : '';
                
                item.innerHTML = `
                    <div class="shop-item-info">
                        <div class="shop-item-img">
                            <img src="${card.image}" alt="${card.name}">
                        </div>
                        <div class="shop-item-details">
                            <div class="shop-item-name">${card.name} ${owned}</div>
                            <div class="shop-item-desc">${card.description}</div>
                        </div>
                    </div>
                    <div>
                        <span class="shop-item-price">${card.cost}Á¢éÁâá</span>
                        <button class="shop-item-btn" ${collectedCards[card.id] || fragments < card.cost ? 'disabled' : ''} 
                            onclick="buySPCard('${card.id}')">ÂÖëÊç¢</button>
                    </div>
                `;
                
                container.appendChild(item);
            });
        }
        
        // Ë¥≠‰π∞SPÂç°Áâá
        function buySPCard(cardId) {
            const card = spCards.find(c => c.id === cardId);
            if (!card) return;
            
            if (fragments < card.cost) {
                alert('Á¢éÁâá‰∏çË∂≥!');
                return;
            }
            
            if (collectedCards[cardId]) {
                alert('Â∑≤ÁªèÊã•ÊúâËøôÂº†Âç°Áâá!');
                return;
            }
            
            fragments -= card.cost;
            collectedCards[cardId] = {
                id: card.id,
                name: card.name,
                image: card.image,
                rarity: card.rarity,
                pool: 'sp',
                collectedAt: new Date().toISOString()
            };
            
            // ‰øùÂ≠òÊï∞ÊçÆ
            localStorage.setItem('collectedCards', JSON.stringify(collectedCards));
            localStorage.setItem('userFragments', fragments);
            
            // Êõ¥Êñ∞ÊòæÁ§∫
            updateFragmentsDisplay();
            renderShopItems();
            
            alert(`ÊàêÂäüÂÖëÊç¢ ${card.name}!`);
        }
        
        // ÊâìÂºÄÂÖëÊç¢ÂºπÁ™ó
        function openExchangeModal() {
            document.getElementById('exchange-modal').style.display = 'flex';
            document.getElementById('modal-exchange-points').value = '';
            document.getElementById('modal-exchange-result').value = '';
            document.getElementById('modal-exchange-points').focus();
        }
        
        // ÂÖ≥Èó≠ÂÖëÊç¢ÂºπÁ™ó
        function closeExchangeModal() {
            document.getElementById('exchange-modal').style.display = 'none';
        }
        
        // ÊâìÂºÄÁªìÊûúÂºπÁ™ó
        function openResultModal() {
            document.getElementById('result-modal').style.display = 'flex';
        }
        
        // ÂÖ≥Èó≠ÁªìÊûúÂºπÁ™ó
        function closeResultModal() {
            document.getElementById('result-modal').style.display = 'none';
        }
        
        // Êõ¥Êñ∞ÂÖëÊç¢ÁªìÊûúÈ¢ÑËßà
        function updateExchangeResult() {
            const pointsInput = document.getElementById('modal-exchange-points');
            const points = parseInt(pointsInput.value) || 0;
            const resultInput = document.getElementById('modal-exchange-result');
            resultInput.value = points * exchangeRate;
        }
        
        // ÂºπÁ™óÂÜÖÂÖëÊç¢ÁßØÂàÜ
        function modalExchangePoints() {
            const pointsInput = document.getElementById('modal-exchange-points');
            const pointsToExchange = parseInt(pointsInput.value);
    
            if (isNaN(pointsToExchange) || pointsToExchange <= 0) {
                alert('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÁßØÂàÜÊï∞Èáè!');
                return;
            }

            // Áõ¥Êé•‰ªélocalStorageËé∑ÂèñÁßØÂàÜÊï∞ÊçÆ
            const points = localStorage.getItem('userPoints') ? parseInt(localStorage.getItem('userPoints')) : 0;
    
            if (points < pointsToExchange) {
                alert('ÁßØÂàÜ‰∏çË∂≥!');
                return;
            }

            // ÊâßË°åÂÖëÊç¢
            const newPoints = points - pointsToExchange;
            const newCoins = coins + (pointsToExchange * exchangeRate);
            
            // Êõ¥Êñ∞Êï∞ÊçÆ
            localStorage.setItem('userPoints', newPoints);
            localStorage.setItem('userCoins', newCoins);
            
            // Êõ¥Êñ∞ÊòæÁ§∫
            coins = newCoins;
            updateCoinsDisplay();
            
            // ÂÖ≥Èó≠ÂºπÁ™ó
            closeExchangeModal();
            
            // ÊèêÁ§∫Áî®Êà∑
            alert(`ÊàêÂäüÂÖëÊç¢ ${pointsToExchange} ÁßØÂàÜ‰∏∫ ${pointsToExchange * exchangeRate} ÈáëÂ∏Å!`);
            pointsInput.value = '';
            
            // ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†ÂÖëÊç¢ËÆ∞ÂΩï
            const records = localStorage.getItem('exchangeRecords') ? JSON.parse(localStorage.getItem('exchangeRecords')) : [];
            records.unshift({
                id: Date.now(),
                productName: `ÂÖëÊç¢ÈáëÂ∏Å (${pointsToExchange}ÁßØÂàÜ)`,
                pointsUsed: pointsToExchange,
                date: new Date().toLocaleString(),
                userName: localStorage.getItem('userName') || "Áî®Êà∑"
            });
            localStorage.setItem('exchangeRecords', JSON.stringify(records));
        }
    </script>
</body>
</html>
